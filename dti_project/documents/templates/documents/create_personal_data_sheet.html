{% extends 'dashboard/layout.html' %}
{% load custom_filters %}

{% block title %} Create Personal Data Sheet {% endblock %}

{% block body %}
    <div class="form-container">
        <header>
            <h1>Personal Data Sheet</h1>
        </header>
        <div class="form-wrapper">

            <form class="documents-form" action="{% url 'create-personal-data-sheet' %}" method="POST">
                {% csrf_token %}

                <fieldset id="personal-background-fieldset">
                    <p class="part-count">Part 1 of 5</p>
                    <legend>Personal Background</legend>

                    <div class="stepped-layout">

                        <div class="step-grid">

                            <div class="form-group">
                                <label for="{{ form.last_name.id_for_label }}">{{ form.last_name.label|safe }}</label>
                                {{ form.last_name }}
                            </div>
                            <div class="form-group">
                                <label for="{{ form.first_name_for_label }}">{{ form.first_name.label|safe }}</label>
                                {{ form.first_name }}
                            </div>
                            <div class="form-group">
                                <label for="{{ form.middle_name_for_label }}">{{ form.middle_name.label|safe }}</label>
                                {{ form.middle_name }}
                            </div>

                        </div>

                        <div class="step-grid">

                            <div class="form-group">
                                <label for="{{ form.email_address_for_label }}">{{ form.email_address.label|safe }}</label>
                                {{ form.email_address }}
                            </div>
                            <div class="form-group">
                                <label for="{{ form.contact_number_for_label }}">{{ form.contact_number.label|safe }}</label>
                                {{ form.contact_number }}
                            </div>
                            <div class="form-group" id="current-address-group">
                                <label for="{{ form.current_address_for_label }}">{{ form.current_address.label|safe }}</label>
                                {{ form.current_address }}
                            </div>
                            
                        </div>

                        <div class="step-grid">

                            <div class="form-group">
                                <label for="{{ form.position_for_label }}">{{ form.position.label|safe }}</label>
                                {{ form.position }}
                            </div>
                            <div class="form-group">
                                <label for="{{ form.nationality_for_label }}">{{ form.nationality.label|safe }}</label>
                                {{ form.nationality }}
                            </div>
                            <div class="form-group">
                                <label for="{{ form.date_of_birth_for_label }}">{{ form.date_of_birth.label|safe }}</label>
                                {{ form.date_of_birth }}
                            </div>
                            <div class="form-group">
                                <label for="{{ form.sex_for_label }}">{{ form.sex.label|safe }}</label>
                                {{ form.sex }}
                            </div>
                            <div class="form-group">
                                <label for="{{ form.civil_status_for_label }}">{{ form.civil_status.label|safe }}</label>
                                {{ form.civil_status }}
                            </div>
                            
                        </div>


                    </div>

                        
                    <div class="form-group" style="margin-top: 1rem;">
                        <label for="{{ form.image_for_label }}">{{ form.image.label|safe }} (Passport Size Photo)</label>
                        <div class="upload-image-container">

                            <button class="upload-file-btn" type="button">
                                <i class="fa-solid fa-upload"></i>
                            </button>

                            <h3 id="drag-drop-text">Drag and drop or <span class="highlighted-span">choose file</span> to upload</h3>
                            <p id="file-text">No file chosen yet.</p>
                            {{ form.image }}

                        </div>
                    </div>

                </fieldset>

                {% for label, formset in formsets.items %}

                    <fieldset>
                        <p class="part-count">Part {{ forloop.counter|add:"1" }} of {{ formsets_count }}</p>
                        <legend>{{ label|titlecase }}</legend>
                        {{ formset.management_form }}

                        <div class="stepped-layout">
                            <div class="step-grid">
                                {% for form in formset %}

                                    {% for field in form.visible_fields %}
                                        <div class="form-group">
                                            <label for="{{ field.id_for_label }}">{{ field.label|safe }}</label>
                                            {{ field }}
                                            {{ field.errors }}
                                        </div>
                                    {% endfor %}

                                {% endfor %}
                            </div>
                        </div>
                    </fieldset>

                {% endfor %}

            </form>

            {% include 'documents/partials/progress-indicator.html' %}
        </div>
    </div>
{% endblock %}